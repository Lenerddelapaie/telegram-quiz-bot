<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quiz ‚Äî √ätes-vous fait pour √™tre gestionnaire de paie ? | La Paie Facile</title>
  <meta name="description" content="D√©couvrez si le m√©tier de gestionnaire de paie est fait pour vous gr√¢ce √† ce quiz interactif La Paie Facile.">

  <!-- Styles additionnels l√©gers pour le bloc email -->
  <style>
    body { margin: 0; background: #fff; color: #111; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    #email-block { max-width: 860px; margin: 40px auto; padding: 0 16px; text-align: center; }
    #email { padding: 12px 14px; border: 2px solid #000; border-radius: 10px; width: 70%; max-width: 420px; font-size: 1rem; }
    .lpf-btn { background:#2AFF00; color:#000; font-weight:900; font-size:1.06rem; padding:12px 18px; border:none; border-radius:12px; cursor:pointer; box-shadow: 0 3px 0 rgba(0,0,0,.7); transition: transform .12s, background .12s; }
    .lpf-btn:hover { background:#20de00; transform: translateY(-1px); }
    .feedback { font-weight: 600; margin-top: 10px; }
  </style>
</head>

<body>
  <!-- ======================= -->
  <!-- LPF QUIZ ‚Äî bloc autonome -->
  <!-- ======================= -->
  <div id="lpf-quiz-root"></div>

  <style>
    /* ===== LPF Styles (scop√©s) ===== */
    #lpf-quiz-root { font-family: Inter, system-ui, Arial, sans-serif; color:#111; max-width: 860px; margin: 32px auto; padding: 0 16px; }
    #lpf-quiz-root * { box-sizing: border-box; }
    #lpf-quiz-root .lpf-card { background:#fff; border:6px solid #000; border-radius:24px; padding:24px 20px; margin:20px 0; box-shadow: 0 6px 0 rgba(0,0,0,.06); }
    #lpf-quiz-root h2 { font-size:1.6rem; margin:0 0 10px; }
    #lpf-quiz-root p { line-height:1.55; }

    /* Progression */
    #lpf-quiz-root .lpf-progress { display:flex; gap:10px; align-items:center; margin: 12px 0 8px; }
    #lpf-quiz-root .lpf-progress-bar { flex:1; background:#eee; height:10px; border-radius:6px; border:2px solid #000; position:relative; }
    #lpf-quiz-root .lpf-progress-bar span { display:block; background:#2AFF00; height:100%; border-radius:4px; transition: width .2s ease; width:0%; }
    #lpf-quiz-root .lpf-progress-label { min-width: 120px; font-weight: 800; text-align: right; }

    /* Section micro-intros */
    #lpf-quiz-root .lpf-section-intro { border:3px dashed #000; border-radius:16px; padding:12px 14px; margin:12px 0; background:#f9f9f9; font-weight: 600; }

    /* Questions & options */
    #lpf-quiz-root .lpf-question { font-weight: 800; font-size:1.14rem; margin-bottom: 12px; }
    #lpf-quiz-root fieldset { border:0; padding:0; margin:0; }
    #lpf-quiz-root legend.lpf-question { padding:0; }
    #lpf-quiz-root .lpf-options { display: grid; gap: 10px; }
    #lpf-quiz-root .lpf-option { display:flex; gap:10px; align-items:flex-start; padding:12px 14px; border:2px solid #000; border-radius:12px; background:#fff; cursor:pointer; transition: transform .08s ease; }
    #lpf-quiz-root .lpf-option:hover { transform: translateY(-1px); }
    #lpf-quiz-root .lpf-option input { margin-top: 2px; }
    /* S√©lection visible */
    #lpf-quiz-root .lpf-option:has(input:checked) { outline: 3px solid #000; outline-offset: 2px; box-shadow: 0 0 0 3px rgba(0,0,0,.05) inset; }
    .no-has #lpf-quiz-root .lpf-option.is-checked { outline: 3px solid #000; outline-offset: 2px; box-shadow: 0 0 0 3px rgba(0,0,0,.05) inset; }

    /* Focus clavier visible */
    #lpf-quiz-root .lpf-option:focus-visible,
    #lpf-quiz-root .lpf-btn:focus-visible { outline: 3px solid #000; outline-offset: 3px; border-radius: 10px; }

    /* Actions / boutons LPF */
    #lpf-quiz-root .lpf-actions { display:flex; gap:10px; justify-content: flex-end; margin-top: 18px; }
    #lpf-quiz-root .lpf-btn {
      background:#2AFF00; color:#000; font-weight: 900; font-size:1.06rem; padding:12px 18px;
      border:none; border-radius: 12px; cursor:pointer; box-shadow: 0 3px 0 rgba(0,0,0,.7); transition: transform .12s, background .12s;
    }
    #lpf-quiz-root .lpf-btn:hover { background:#20de00; transform: translateY(-1px); }
    #lpf-quiz-root .lpf-btn.ghost { background:#fff; border:2px solid #000; box-shadow:none; font-weight: 800; }
    #lpf-quiz-root .lpf-btn[disabled] { opacity:.5; cursor:not-allowed; }

    /* Break & Result */
    #lpf-quiz-root .lpf-break h3 { margin: 0 0 6px; }
    #lpf-quiz-root .lpf-break p { margin: 6px 0; }
    #lpf-quiz-root .lpf-result h2 { margin-top:0; }
    #lpf-quiz-root .lpf-result .body { margin-top: 8px; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      #lpf-quiz-root * { transition: none !important; animation: none !important; }
    }

    @media (max-width:560px){
      #lpf-quiz-root .lpf-actions { flex-direction: column; }
      #lpf-quiz-root .lpf-btn, #lpf-quiz-root .lpf-btn.ghost { width: 100%; }
    }
  </style>

  <script>
  (function(){
    /* ====== PARAMS ====== */
    const GUIDE_URL = "https://tonsite.com/guide-complet-gestionnaire-de-paie.pdf"; // ‚Üê remplace par ton lien PDF
    const PROG = [20,30,40,50,55,60,70,75,80,85,95,100]; // progression affich√©e

    /* D√©tection support :has() (fallback classe .no-has) */
    try{ document.querySelector(':has(*)'); } catch(e){ document.documentElement.classList.add('no-has'); }

    /* Contenus d'intro */
    const TEXT = {
      start: {
        title: "Quiz ¬´ √ätes-vous fait pour √™tre gestionnaire de paie ? ¬ª",
        body: [
          "D√©couvrez ce qui vous motive vraiment au travail et si le m√©tier de gestionnaire de paie vous correspond.",
          "¬´ Tout le monde sait ce qu‚Äôil fait‚Ä¶ mais tr√®s peu savent pourquoi ils le font. ¬ª ‚Äî Simon Sinek",
          "Avant de choisir votre prochaine √©tape professionnelle, prenez un moment pour comprendre ce qui vous anime vraiment.",
          "Ce quiz interactif vous invite √† un voyage simple et puissant pour avancer avec clart√© et confiance.",
          "Ce n‚Äôest pas un test ordinaire : c‚Äôest un outil pour vous reconnecter √† ce qui vous anime profond√©ment."
        ],
        cta: "üöÄ C‚Äôest parti"
      },
      instructions: {
        title: "Avant de commencer",
        ps: [
          "Ce quiz comprend <strong>une dizaine de questions simples</strong>, √† compl√©ter en <strong>3 √† 5 minutes</strong>.",
          "√Ä chaque √©tape, choisissez la r√©ponse <strong>qui vous correspond le mieux</strong>.",
          "Il n‚Äôy a <strong>ni bonnes ni mauvaises r√©ponses</strong> : chacune r√©v√®le une part de votre force.",
          "Une <strong>barre de progression</strong> vous montre votre avancement : chaque √©tape franchie vous rapproche du r√©sultat.",
          "‚ö†Ô∏è Pour un portrait fiable, <strong>r√©pondez √† toutes les questions</strong>.",
          "√Ä la fin, vous recevrez votre <strong>profil expliqu√©</strong>, le <strong>danger √† √©viter</strong> et le <strong>guide complet</strong> pour r√©ussir concr√®tement.",
          "<em>C‚Äôest rapide, simple et 100 % confidentiel.</em>"
        ],
        cta: "üéØ Commencer le quiz"
      },
      micro: {
        a: "R√©pondez spontan√©ment : la premi√®re id√©e est souvent la bonne.",
        b: "Continuez sur votre lanc√©e : vous avancez tr√®s bien.",
        c: "Derni√®re ligne droite : votre portrait se pr√©cise."
      },
      breaks: {
        after4: {
          h: "Premi√®re √©tape r√©ussie",
          t: "Vous avez pos√© des bases solides. Continuez : vous tenez un bon rythme.",
          s: "Vous avez d√©j√† parcouru 50 % du chemin."
        },
        after8: {
          h: "Deuxi√®me √©tape compl√©t√©e",
          t: "Plus que quelques questions pour affiner votre portrait.",
          s: "Vous √™tes d√©j√† √† 75 % du parcours."
        },
        final: {
          h: "Bravo, vous √™tes all√©(e) jusqu‚Äôau bout",
          t: "Votre profil est pr√™t : forces + danger √† √©viter, avec les prochaines √©tapes.",
          cta: "Voir mon r√©sultat"
        }
      }
    };

    /* Questions */
    const QUESTIONS = [
      // Bloc A (1..4)
      { id:"q1", block:"a", text:"Qu‚Äôest-ce qui vous motive le plus dans votre travail ?", options:[
        {label:"Contribuer √† la justice et √† l‚Äô√©quit√©", profile:"gardien"},
        {label:"Organiser et mettre de l‚Äôordre", profile:"organisateur"},
        {label:"Relever des d√©fis et r√©soudre des probl√®mes", profile:"resolveur"},
        {label:"Communiquer et aider les autres", profile:"communicant"}
      ]},
      { id:"q2", block:"a", text:"Quelle valeur compte le plus pour vous au quotidien ?", options:[
        {label:"L‚Äô√©quit√© ‚Äì garantir un traitement juste", profile:"gardien"},
        {label:"L‚Äôorganisation ‚Äì un cadre structur√©", profile:"organisateur"},
        {label:"La fiabilit√© ‚Äì on peut compter sur vous", profile:"collaborateur"},
        {label:"L‚Äôapprentissage ‚Äì √©voluer en continu", profile:"curieux"}
      ]},
      { id:"q3", block:"a", text:"Qu‚Äôest-ce qui vous attire dans la gestion de la paie ?", options:[
        {label:"Assurer une paie correcte et conforme pour tous", profile:"gardien"},
        {label:"√ätre au c≈ìur du fonctionnement et de la stabilit√©", profile:"organisateur"},
        {label:"Ma√Ætriser un domaine technique exigeant", profile:"expert"},
        {label:"Allier chiffres et accompagnement des personnes", profile:"communicant"}
      ]},
      { id:"q4", block:"a", text:"Qu‚Äôest-ce qui vous donne le plus le sentiment d‚Äô√™tre utile ?", options:[
        {label:"Aider concr√®tement quelqu‚Äôun", profile:"collaborateur"},
        {label:"R√©soudre un probl√®me √©pineux", profile:"resolveur"},
        {label:"Respecter les √©ch√©ances et les r√®gles", profile:"organisateur"},
        {label:"Apprendre quelque chose de nouveau", profile:"curieux"}
      ]},

      // Bloc B (5..8)
      { id:"q5", block:"b", text:"Laquelle de ces phrases vous ressemble le plus au travail ?", options:[
        {label:"Je planifie m√©thodiquement mes t√¢ches", profile:"organisateur"},
        {label:"Je v√©rifie chaque d√©tail pour √©viter les erreurs", profile:"expert"},
        {label:"Je prends des initiatives et j‚Äôavance en autonomie", profile:"strategique"},
        {label:"Je collabore et je facilite la communication", profile:"communicant"}
      ]},
      { id:"q6", block:"b", text:"Face √† une nouvelle t√¢che complexe, vous avez tendance √†‚Ä¶", options:[
        {label:"Vous documenter et vous former", profile:"curieux"},
        {label:"D√©couper en √©tapes structur√©es", profile:"organisateur"},
        {label:"Voir √ßa comme un d√©fi stimulant", profile:"resolveur"},
        {label:"Demander conseil aux plus exp√©riment√©s", profile:"communicant"}
      ]},
      { id:"q7", block:"b", text:"En cas d‚Äôimpr√©vu ou d‚Äôurgence, vous‚Ä¶", options:[
        {label:"Gardez votre calme et analysez", profile:"resolveur"},
        {label:"Priorisez et vous organisez aussit√¥t", profile:"organisateur"},
        {label:"Informez et coordonnez l‚Äôentraide", profile:"communicant"},
        {label:"Appliquez les r√®gles et la technique", profile:"expert"}
      ]},
      { id:"q8", block:"b", text:"Le compliment qui vous fait le plus plaisir :", options:[
        {label:"¬´ On peut toujours compter sur vous ¬ª", profile:"collaborateur"},
        {label:"¬´ C‚Äôest toujours bien organis√© et sans erreur ¬ª", profile:"organisateur"},
        {label:"¬´ Vous trouvez toujours la solution ¬ª", profile:"resolveur"},
        {label:"¬´ Votre p√©dagogie nous aide √©norm√©ment ¬ª", profile:"communicant"}
      ]},

      // Bloc C (9..12)
      { id:"q9", block:"c", text:"Quelle activit√© vous attire le plus ?", options:[
        {label:"Analyser des chiffres et v√©rifier des calculs", profile:"expert"},
        {label:"Mettre en place un tableau d‚Äôorganisation", profile:"organisateur"},
        {label:"Expliquer un bulletin de paie √† un coll√®gue", profile:"communicant"},
        {label:"Veiller au respect des r√®gles et proc√©dures", profile:"gardien"}
      ]},
      { id:"q10", block:"c", text:"Parmi ces t√¢ches, laquelle pr√©f√©rez-vous ?", options:[
        {label:"Le droit / la gestion", profile:"gardien"},
        {label:"La comptabilit√© / les math√©matiques", profile:"expert"},
        {label:"Les √©tudes de cas complexes", profile:"resolveur"},
        {label:"Les travaux en groupe avec entraide", profile:"communicant"}
      ]},
      { id:"q11", block:"c", text:"Dans un poste administratif, vous aimez surtout‚Ä¶", options:[
        {label:"La pr√©cision des proc√©dures", profile:"gardien"},
        {label:"Am√©liorer les m√©thodes et les outils", profile:"strategique"},
        {label:"√ätre la personne r√©f√©rente sur le technique", profile:"expert"},
        {label:"Accompagner et informer les autres", profile:"communicant"}
      ]},
      { id:"q12", block:"c", text:"Ce qui vous enthousiasmerait le plus en paie :", options:[
        {label:"Garantir une paie juste et conforme", profile:"gardien"},
        {label:"Organiser le calendrier et les √©ch√©ances", profile:"organisateur"},
        {label:"Ma√Ætriser les d√©tails techniques et les logiciels", profile:"expert"},
        {label:"Conseiller les collaborateurs", profile:"communicant"}
      ]}
    ];

    /* Pond√©rations internes */
    const WEIGHTS = { a:0.5, b:0.3, c:0.2 };
    const TIE = ["gardien","organisateur","expert","resolveur","communicant","collaborateur","strategique","curieux"];

    /* ====== TES 8 TEXTES DE R√âSULTAT (injection HTML) ====== */
    const RESULTS = {
      gardien: {
        title: "Vous √™tes : Gardien de l‚Äô√âquit√©",
        body: `Le gestionnaire de paie est le garant de l‚Äô√©quit√© au sein de l‚Äôentreprise. Son r√¥le ne se limite pas √† √©tablir des bulletins de paie : il veille √† ce que chaque salari√© re√ßoive exactement ce qui lui est d√ª, conform√©ment √† la l√©gislation sociale en constante √©volution. Cela implique la pr√©paration rigoureuse des salaires, la gestion pr√©cise des d√©clarations sociales obligatoires, la prise en compte des absences, primes, heures suppl√©mentaires, ainsi que le respect scrupuleux des √©ch√©ances.
<br><br>C‚Äôest un m√©tier √† haute responsabilit√©, au croisement du juridique, du technique et de l‚Äôorganisation, o√π chaque erreur peut avoir des cons√©quences financi√®res et humaines majeures.
<br><br>En tant que Gardien de l‚Äô√âquit√©, vous incarnez la rigueur et le sens du juste. Votre int√©grit√© vous positionne comme un pilier fiable dans un environnement o√π la pr√©cision est essentielle pour √©viter les in√©galit√©s ou litiges. Votre capacit√© √† expliquer clairement les r√®gles complexes aux salari√©s ajoute une dimension humaine pr√©cieuse, rassurante et p√©dagogique.
<br><br><strong>‚ö†Ô∏è Cependant</strong>, votre qu√™te absolue de justice peut parfois g√©n√©rer du stress, surtout face √† l‚Äôincertitude juridique ou aux subtilit√©s changeantes des r√®gles de paie. Un param√©trage oubli√© ou une interpr√©tation erron√©e peuvent paradoxalement cr√©er l‚Äôinjustice que vous souhaitez combattre.
<br><br>La cl√© pour vous est d‚Äôasseoir votre expertise sur une connaissance solide des fondamentaux associ√©e √† une vision globale apais√©e et structur√©e de la paie.
<br><br><strong>üëâ Pour transformer cette rigueur en un v√©ritable atout durable, t√©l√©chargez votre guide pratique, con√ßu pour vous accompagner vers un m√©tier de gestionnaire de paie exerc√© avec confiance, ma√Ætrise et s√©r√©nit√©.</strong>`
      },
      organisateur: {
        title: "Vous √™tes : Organisateur M√©thodique",
        body: `Le gestionnaire de paie a la lourde responsabilit√© de piloter l‚Äôensemble des op√©rations li√©es au salaire des collaborateurs : √©laboration pr√©cise des bulletins de paie, suivi rigoureux des d√©clarations sociales, respect imp√©ratif des √©ch√©ances mensuelles, et gestion s√©curis√©e des donn√©es sensibles. Au c≈ìur de ce m√©tier complexe, se conjuguent des comp√©tences techniques pointues, une connaissance fine du cadre juridique, et une organisation sans faille. Chaque √©l√©ment doit √™tre orchestr√© avec rigueur, efficacit√© et adaptabilit√© pour √©viter erreurs et retards co√ªteux.
<br><br>En tant qu‚ÄôOrganisateur M√©thodique, votre force est votre capacit√© √† structurer, anticiper et maintenir un ordre irr√©prochable. Vous excellez dans la planification des t√¢ches et le suivi des cycles paie, des points essentiels dans un m√©tier rythm√© par des √©ch√©ances pr√©cises et contraignantes. Votre profil r√©v√®le √©galement une affinit√© pour la pr√©cision technique, proche du r√¥le d‚Äôexpert technique, ce qui vous permet d‚Äô√™tre aussi efficace sur la forme que sur le fond.
<br><br><strong>‚ö†Ô∏è Cependant</strong>, la gestion des impr√©vus ‚Äî absences soudaines, variables de derni√®re minute, √©volutions r√©glementaires fr√©quentes ‚Äî peut mettre √† l‚Äô√©preuve votre organisation. Le succ√®s repose alors sur votre capacit√© √† ajuster vos priorit√©s, √† rester flexible tout en gardant le cap sur l‚Äôessentiel.
<br><br><strong>üëâ Pour transformer cette organisation naturelle en un puissant levier de r√©ussite, t√©l√©chargez votre guide pratique. D√©couvrez comment conjuguer m√©thode et souplesse pour exceller durablement dans votre parcours de gestionnaire de paie.</strong>`
      },
      resolveur: {
        title: "Vous √™tes : R√©solveur de Probl√®mes",
        body: `Le gestionnaire de paie jongle chaque mois avec un grand nombre d‚Äôinformations complexes : calculs pr√©cis, variables sp√©cifiques √† chaque salari√©, √©volutions l√©gales fr√©quentes, d√©clarations sociales et corrections d‚Äôanomalies. Son m√©tier est un subtil √©quilibre entre technique, r√©glementation et organisation, o√π chaque situation exceptionnelle demande une vigilance et une r√©activit√© accrues.
<br><br>Vous √™tes avant tout un R√©solveur de Probl√®mes : vous aimez analyser en profondeur, comprendre les m√©canismes et surtout trouver des solutions efficaces. Cette capacit√© √† d√©bloquer les cas particuliers et √† corriger les anomalies est pr√©cieuse dans un environnement o√π chaque d√©tail compte et o√π l‚Äôadaptabilit√© est essentielle. Votre profil r√©v√®le √©galement une dimension d‚Äôorganisateur m√©thodique, ce qui vous permet de ne pas perdre de vue les √©ch√©ances cruciales.
<br><br><strong>‚ö†Ô∏è Toutefois</strong>, en vous concentrant trop longuement sur un probl√®me isol√©, vous risquez de perdre le fil global, ce qui pourrait compromettre le respect des d√©lais et fragiliser l‚Äôensemble du cycle paie.
<br><br><strong>üëâ Pour canaliser votre esprit analytique tout en assurant la ponctualit√© indispensable, t√©l√©chargez votre guide pratique. Apprenez √† conjuguer rigueur, m√©thode et agilit√© pour faire de vos qualit√©s de r√©solveur un v√©ritable atout dans votre carri√®re de gestionnaire de paie.</strong>`
      },
      communicant: {
        title: "Vous √™tes : Communicant Responsable",
        body: `Le gestionnaire de paie ne se limite pas √† des chiffres dans des tableaux. C‚Äôest souvent un interlocuteur privil√©gi√© pour les salari√©s qui souhaitent comprendre leur fiche de paie, poser des questions ou √™tre rassur√©s. Ce m√©tier demande donc autant de comp√©tences humaines que techniques : vous √™tes le lien essentiel entre la complexit√© r√©glementaire et les attentes des collaborateurs.
<br><br>Vous √™tes avant tout un Communicant Responsable : vous savez expliquer avec clart√©, √©couter activement et transmettre les informations de fa√ßon rassurante. Votre r√¥le de m√©diateur cr√©e un climat de confiance indispensable dans une p√©riode sensible o√π la paie impacte directement le quotidien des salari√©s. Votre profil d√©voile √©galement une bonne organisation, qui vous permet de g√©rer efficacement votre charge de travail tout en restant disponible.
<br><br><strong>‚ö†Ô∏è Attention</strong> cependant, votre sens du service et votre disponibilit√© peuvent √™tre source de dispersion. En voulant r√©pondre √† toutes les sollicitations, vous risquez de n√©gliger la rigueur technique indispensable √† la s√©curit√© des paies.
<br><br><strong>üëâ Pour trouver l‚Äô√©quilibre parfait entre communication et pr√©cision, t√©l√©chargez votre guide pratique. Il vous accompagnera pour exceller dans votre r√¥le de gestionnaire de paie, √† la fois p√©dagogue et expert fiable.</strong>`
      },
      expert: {
        title: "Vous √™tes : Expert Technique",
        body: `Le m√©tier de gestionnaire de paie repose sur une ma√Ætrise technique pointue. Il s'agit de g√©rer des r√®gles juridiques complexes, d'effectuer des calculs pr√©cis des cotisations sociales, de param√©trer avec rigueur des logiciels sp√©cialis√©s, et de garantir la conformit√© avec les lois et conventions collectives. Dans ce domaine, chaque d√©tail a son importance et peut avoir des cons√©quences majeures, tant pour l‚Äôentreprise que pour les salari√©s.
<br><br>Vous √™tes avant tout un Expert Technique : vous aimez comprendre en profondeur les r√®gles, v√©rifier minutieusement les chiffres, et produire des documents impeccables. Votre rigueur et votre souci du d√©tail font de vous un pilier indispensable dans la cha√Æne de la paie. Votre profil r√©v√®le aussi une capacit√© d‚Äôanalyse forte, un atout pr√©cieux pour d√©tecter et r√©soudre rapidement les anomalies.
<br><br><strong>‚ö†Ô∏è Cependant</strong>, votre immersion dans la complexit√© technique peut parfois vous faire perdre la vision d‚Äôensemble et vous isoler dans les d√©tails, au risque de passer √† c√¥t√© des enjeux plus globaux.
<br><br><strong>üëâ Pour renforcer et structurer vos comp√©tences techniques tout en gardant une perspective strat√©gique, t√©l√©chargez votre guide pratique. Apprenez √† transformer votre expertise en un levier reconnu et durable pour r√©ussir pleinement votre carri√®re de gestionnaire de paie.</strong>`
      },
      strategique: {
        title: "Vous √™tes : Strat√©gique Visionnaire",
        body: `Le gestionnaire de paie ne se limite plus √† un simple r√¥le technique. Il est aujourd‚Äôhui un acteur cl√© de la performance globale de l‚Äôentreprise. Au-del√† de la pr√©paration des bulletins de salaire, il optimise les processus, pilote les outils num√©riques, anticipe les √©volutions r√©glementaires, et contribue aux strat√©gies de Ressources Humaines. Son expertise nourrit les d√©cisions strat√©giques pour garantir la conformit√©, la satisfaction des collaborateurs et la stabilit√© financi√®re de l‚Äôentreprise.
<br><br>Vous √™tes avant tout un Strat√©gique Visionnaire : vous aimez prendre du recul, observer les syst√®mes dans leur globalit√©, et identifier les leviers d‚Äôam√©lioration. Vous refusez la routine, voyant la paie comme un processus √† faire √©voluer en continu. Votre capacit√© √† innover s‚Äôappuie sur une base solide d‚Äôorganisation, indispensable pour concr√©tiser vos ambitions et transformer la strat√©gie en r√©sultats op√©rationnels.
<br><br><strong>‚ö†Ô∏è Pourtant</strong>, si vous n√©gligez les fondamentaux du quotidien ‚Äî la ma√Ætrise des calculs, le respect des √©ch√©ances et la conformit√© ‚Äî votre vision ambitieuse risque de rester th√©orique et sans impact concret.
<br><br><strong>üëâ Pour poser les fondations solides de votre avenir strat√©gique, t√©l√©chargez votre guide pratique. Il vous aidera √† √©quilibrer vision d‚Äôensemble et rigueur op√©rationnelle, pour faire de votre parcours gestionnaire de paie une r√©ussite durable.</strong>`
      },
      collaborateur: {
        title: "Vous √™tes : Collaborateur Discret et Fiable",
        body: `Le m√©tier de gestionnaire de paie repose sur une exigence absolue de confidentialit√© et de fiabilit√©. Vous traitez au quotidien des donn√©es sensibles : salaires, absences, contrats, informations personnelles pr√©cises qui demandent un respect rigoureux des r√®gles de confidentialit√©. Chaque salari√© doit pouvoir vous faire pleinement confiance, car une erreur ou une fuite d‚Äôinformation pourrait entra√Æner des cons√©quences lourdes tant humaines que juridiques.
<br><br>Vous √™tes avant tout un Collaborateur Discret et Fiable : s√©rieux, loyal et constant, vous √™tes la personne sur laquelle l‚Äôentreprise s‚Äôappuie pour assurer des paies justes, conformes et s√©curis√©es. Votre sens aigu de l‚Äô√©quit√© vient renforcer ce statut, faisant de vous un acteur cl√© dans la justice salariale au quotidien.
<br><br><strong>‚ö†Ô∏è Cependant</strong>, votre discr√©tion et votre modestie peuvent freiner la reconnaissance de vos comp√©tences et limiter vos perspectives d‚Äô√©volution professionnelle.
<br><br><strong>üëâ Pour valoriser vos atouts, renforcer votre confiance et avancer sereinement dans votre carri√®re, t√©l√©chargez votre guide pratique. Apprenez √† faire rayonner votre fiabilit√© tout en d√©veloppant votre visibilit√© dans le m√©tier de gestionnaire de paie.</strong>`
      },
      curieux: {
        title: "Vous √™tes : Curieux Apprenant",
        body: `Le domaine de la paie est en constante √©volution : les lois changent r√©guli√®rement, les conventions collectives sont mises √† jour, et les logiciels se modernisent sans cesse. Pour r√©ussir dans ce m√©tier dynamique, il faut absolument √™tre capable d‚Äôapprendre en continu et d‚Äôadapter ses connaissances au fil des nouveaut√©s.
<br><br>Vous √™tes avant tout un Curieux Apprenant : vous aimez d√©couvrir, progresser et explorer de nouveaux savoirs. Cette curiosit√© est un moteur puissant dans un environnement qui bouge sans cesse. Votre profil r√©v√®le aussi une capacit√© naturelle √† communiquer et partager vos apprentissages, une qualit√© pr√©cieuse pour √©voluer en √©quipe.
<br><br><strong>‚ö†Ô∏è Attention</strong> cependant : sans un plan clair et structur√©, vous risquez de vous disperser et de manquer de bases solides, ce qui pourrait ralentir votre progression.
<br><br><strong>üëâ Pour structurer vos apprentissages et progresser efficacement, t√©l√©chargez votre guide pratique. D√©couvrez comment transformer votre soif d‚Äôapprendre en succ√®s concret dans le m√©tier de gestionnaire de paie, m√™me face aux √©volutions constantes.</strong>`
      }
    };

    /* ===== Utils ===== */
    function seedRng(seed){
      let x = 0; for (let i=0;i<seed.length;i++) x = (x<<5) - x + seed.charCodeAt(i) | 0;
      return ()=>{ x ^= x<<13; x ^= x>>>17; x ^= x<<5; return ((x>>>0) / 4294967295); };
    }
    function stableShuffle(arr, seed){
      const rnd = seedRng(seed);
      return arr.map(v=>[rnd(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
    }
    function naiveSanitize(html){
      const tmp = document.createElement('div'); tmp.innerHTML = html;
      tmp.querySelectorAll('*').forEach(n=>{
        const allowed = ['P','BR','STRONG','EM','UL','OL','LI','H2','H3','A'];
        if(!allowed.includes(n.tagName)) n.replaceWith(...n.childNodes);
        if(n.tagName==='A'){
          [...n.attributes].forEach(a=>{ if(a.name.startsWith('on')) n.removeAttribute(a.name); });
          const href = (n.getAttribute('href')||'').trim().toLowerCase();
          if(href.startsWith('javascript:')) n.removeAttribute('href');
          n.setAttribute('rel','noopener noreferrer'); n.setAttribute('target','_blank');
        }
      });
      return tmp.innerHTML;
    }

    /* ===== Rendu ===== */
    const root = document.getElementById("lpf-quiz-root");

    function el(tag, attrs={}, children=[]) {
      const n = document.createElement(tag);
      Object.entries(attrs).forEach(([k,v])=>{
        if(k==="class") n.className=v;
        else if(k==="html") n.innerHTML=v;
        else n.setAttribute(k,v);
      });
      (Array.isArray(children)?children:[children]).forEach(c=>{
        if(typeof c==="string") n.appendChild(document.createTextNode(c));
        else if(c) n.appendChild(c);
      });
      return n;
    }

    function renderStart() {
      root.innerHTML = "";
      const card = el("div",{class:"lpf-card"});
      card.appendChild(el("h2",{},TEXT.start.title));
      TEXT.start.body.forEach(p=> card.appendChild(el("p",{},p)));
      const actions = el("div",{class:"lpf-actions"},[
        el("button",{class:"lpf-btn",type:"button"}, TEXT.start.cta)
      ]);
      actions.querySelector("button").addEventListener("click", renderInstructions);
      card.appendChild(actions);
      root.appendChild(card);
      actions.querySelector("button").focus();
    }

    function renderInstructions() {
      root.innerHTML = "";
      const card = el("div",{class:"lpf-card"});
      card.appendChild(el("h2",{},TEXT.instructions.title));
      TEXT.instructions.ps.forEach(html => card.appendChild(el("p",{html: naiveSanitize(html)})));
      const actions = el("div",{class:"lpf-actions"},[
        el("button",{class:"lpf-btn",type:"button"}, TEXT.instructions.cta)
      ]);
      actions.querySelector("button").addEventListener("click", ()=>renderQuiz(0));
      card.appendChild(actions);
      root.appendChild(card);
      actions.querySelector("button").focus();
    }

    /* √âtat */
    let answers = []; // [{id, block, profile}]
    let stepIndex = 0;

    function renderQuiz(index){
      stepIndex = index;
      root.innerHTML = "";

      /* Progression (ARIA + live) */
      const progWrap = el("div",{class:"lpf-progress"});
      const bar = el("div",{class:"lpf-progress-bar", role:"progressbar", "aria-valuemin":"0","aria-valuemax":"100","aria-label":"Progression du quiz"});
      const fill = el("span",{id:"lpf-fill"});
      bar.appendChild(fill);
      const liveLabel = el("div",{class:"lpf-progress-label", "aria-live":"polite"}, el("span",{id:"lpf-label"},""));
      progWrap.appendChild(bar); progWrap.appendChild(liveLabel);
      root.appendChild(progWrap);

      const q = QUESTIONS[index];

      /* Micro-intro */
      if(index===0)  root.appendChild(el("div",{class:"lpf-section-intro"}, TEXT.micro.a));
      if(index===4)  root.appendChild(el("div",{class:"lpf-section-intro"}, TEXT.micro.b));
      if(index===8)  root.appendChild(el("div",{class:"lpf-section-intro"}, TEXT.micro.c));

      /* Carte question */
      const card = el("div",{class:"lpf-card"});
      const fieldset = el("fieldset");
      const legendId = q.id+"_legend";
      fieldset.appendChild(el("legend",{class:"lpf-question", id:legendId}, q.text));

      const optsWrap = el("div",{class:"lpf-options"});
      const prev = answers.find(a=>a.id===q.id);
      const opts = stableShuffle(q.options.slice(), q.id);
      opts.forEach((opt,i)=>{
        const id = q.id+"_opt_"+i;
        const labelEl = el("label",{class:"lpf-option", for:id});
        const radio = el("input",{type:"radio",name:q.id,id,"data-profile":opt.profile});
        if(prev && prev.profile===opt.profile) { radio.checked = true; labelEl.classList.add('is-checked'); }
        labelEl.appendChild(radio);
        labelEl.appendChild(el("span",{},opt.label));
        optsWrap.appendChild(labelEl);
      });
      // fallback :has() ‚Üí maj classes
      optsWrap.addEventListener('change', (e)=>{
        if(!document.documentElement.classList.contains('no-has')) return;
        optsWrap.querySelectorAll('.lpf-option').forEach(l=>l.classList.remove('is-checked'));
        const lbl = e.target.closest('.lpf-option'); if(lbl) lbl.classList.add('is-checked');
      });

      fieldset.appendChild(optsWrap);
      card.appendChild(fieldset);

      const actions = el("div",{class:"lpf-actions"});
      const prevBtn = el("button",{class:"lpf-btn ghost",type:"button"},"Revenir");
      const nextBtn = el("button",{class:"lpf-btn",type:"button"},"Continuer");
      actions.appendChild(prevBtn);
      actions.appendChild(nextBtn);
      card.appendChild(actions);
      root.appendChild(card);

      /* Boutons / √©tats */
      prevBtn.disabled = (index===0);
      nextBtn.disabled = !(prev); // activ√© si r√©ponse existante

      card.addEventListener("change", (e)=>{
        if(e.target && e.target.type==="radio"){ nextBtn.disabled = false; }
      });

      prevBtn.addEventListener("click", ()=>{
        if(index>0){ renderQuiz(index-1); }
      });

      nextBtn.addEventListener("click", ()=>{
        const checked = card.querySelector("input[type=radio]:checked");
        if(!checked) return;
        // remplace la r√©ponse de la question courante (pas de pop(), pas d'ordre suppos√©)
        answers = answers.filter(a => a.id !== q.id);
        answers.push({ id:q.id, block:q.block, profile: checked.getAttribute("data-profile") });

        if(index===3){ renderBreak("after4", index+1); return; }
        if(index===7){ renderBreak("after8", index+1); return; }
        if(index < QUESTIONS.length-1) renderQuiz(index+1);
        else renderFinalGate();
      });

      /* Progression affich√©e + ARIA + live */
      const pct = PROG[index];
      fill.style.width = pct + "%";
      bar.setAttribute("aria-valuenow", pct);
      const labelSpan = document.getElementById("lpf-label");
      if(labelSpan) labelSpan.textContent = pct + " %";

      /* Focus management : focus 1 ≥·µâ radio sinon legend */
      const firstRadio = fieldset.querySelector('input[type=radio]');
      (firstRadio || fieldset.querySelector('legend')).focus();
    }

    function renderBreak(which, nextIndex){
      root.innerHTML = "";
      const p = PROG[nextIndex-1];
      const progWrap = el("div",{class:"lpf-progress"});
      const bar = el("div",{class:"lpf-progress-bar", role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":String(p),"aria-label":"Progression du quiz"});
      bar.appendChild(el("span",{style:"width:"+p+"%"}));
      const liveLabel = el("div",{class:"lpf-progress-label", "aria-live":"polite"}, p+" %");
      progWrap.appendChild(bar); progWrap.appendChild(liveLabel);
      root.appendChild(progWrap);

      const data = TEXT.breaks[which];
      const card = el("div",{class:"lpf-card lpf-break"});
      const h = el("h3",{}, data.h);
      card.appendChild(h);
      card.appendChild(el("p",{}, data.t));
      card.appendChild(el("p",{}, data.s));
      const actions = el("div",{class:"lpf-actions"},[
        el("button",{class:"lpf-btn",type:"button"},"Continuer")
      ]);
      actions.querySelector("button").addEventListener("click", ()=>renderQuiz(nextIndex));
      card.appendChild(actions);
      root.appendChild(card);
      h.focus();
    }

    function renderFinalGate(){
      root.innerHTML = "";
      const progWrap = el("div",{class:"lpf-progress"});
      const bar = el("div",{class:"lpf-progress-bar", role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"100","aria-label":"Progression du quiz"});
      bar.appendChild(el("span",{style:"width:100%"}));
      const liveLabel = el("div",{class:"lpf-progress-label", "aria-live":"polite"},"100 %");
      progWrap.appendChild(bar); progWrap.appendChild(liveLabel);
      root.appendChild(progWrap);

      const data = TEXT.breaks.final;
      const card = el("div",{class:"lpf-card lpf-break"});
      const h = el("h3",{}, data.h);
      card.appendChild(h);
      card.appendChild(el("p",{}, data.t));
      const actions = el("div",{class:"lpf-actions"},[
        el("button",{class:"lpf-btn",type:"button"}, data.cta)
      ]);
      actions.querySelector("button").addEventListener("click", renderResult);
      card.appendChild(actions);
      root.appendChild(card);
      h.focus();
    }

    /* ===== Scoring ===== */
    function computeScores(){
      const profiles = ["gardien","organisateur","resolveur","communicant","expert","strategique","collaborateur","curieux"];
      const a={}, b={}, c={}; profiles.forEach(p=>{ a[p]=0; b[p]=0; c[p]=0; });

      answers.forEach(ans=>{
        if(ans.block==="a") a[ans.profile] = (a[ans.profile]||0)+1;
        if(ans.block==="b") b[ans.profile] = (b[ans.profile]||0)+1;
        if(ans.block==="c") c[ans.profile] = (c[ans.profile]||0)+1;
      });

      const argmax = (obj) => { let best=null, bestV=-Infinity; for(const [k,v] of Object.entries(obj)){ if(v>bestV){best=k; bestV=v;} } return best; };
      const domA = argmax(a);
      const domB = argmax(b);
      const domC = argmax(c);

      const weighted = {};
      profiles.forEach(p=>{
        weighted[p] = (WEIGHTS.a*(a[p]||0)) + (WEIGHTS.b*(b[p]||0)) + (WEIGHTS.c*(c[p]||0));
      });
      const maxV = Math.max(...profiles.map(p=>weighted[p]));
      const cands = profiles.filter(p=> weighted[p]===maxV);

      let global = cands[0];
      if(cands.length>1){
        if(domA && cands.includes(domA)) global = domA;
        else if(domB && cands.includes(domB)) global = domB;
        else { for(const pr of TIE){ if(cands.includes(pr)){ global = pr; break; } } }
      }
      return { global, domA, domB, domC };
    }

    /* ===== Rendu du r√©sultat (injecte title + body en HTML) ===== */
    function renderResult(){
      const s = computeScores();
      const R = RESULTS[s.global] || RESULTS.organisateur; // fallback

      root.innerHTML = "";

      const card = el("div",{class:"lpf-card lpf-result"});
      const titleEl = el("h2",{}, R.title);
      card.appendChild(titleEl);
      card.appendChild(el("div",{class:"body", html: naiveSanitize(R.body)}));

      const actions = el("div",{class:"lpf-actions"},[
        el("a",{class:"lpf-btn",href:GUIDE_URL,target:"_blank",rel:"noopener noreferrer"},"T√©l√©charger mon guide personnalis√©")
      ]);
      card.appendChild(actions);

      root.appendChild(card);

      // Focus + analytics
      titleEl.focus();
      try { window.dispatchEvent(new CustomEvent('lpf-quiz-finished', {detail:{profile:s.global, domA:s.domA, domB:s.domB, domC:s.domC}})); } catch(e){}
    }

    /* Init */
    renderStart();
  })();
  </script>

  <!-- ========================= -->
  <!-- Bloc e-mail + JS d‚Äôenvoi -->
  <!-- ========================= -->
  <div id="email-block">
    <h2 style="margin-bottom:8px;">Recevez votre guide personnalis√© üìò</h2>
    <p style="margin-top:0;">Entrez votre e-mail pour recevoir votre profil et le guide La Paie Facile.</p>
    <input id="email" type="email" placeholder="Votre e-mail">
    <br>
    <button id="sendEmail" class="lpf-btn" style="margin-top:14px;">Envoyer mon profil</button>
    <div id="feedback" class="feedback"></div>
  </div>

  <script>
    const emailInput = document.getElementById("email");
    const sendBtn = document.getElementById("sendEmail");
    const feedbackEl = document.getElementById("feedback");

    // Le quiz √©met cet √©v√©nement √† la fin (d√©j√† g√©r√© dans ton code)
    window._lpfProfile = "";
    window.addEventListener("lpf-quiz-finished", (ev) => {
      window._lpfProfile = ev.detail?.profile || "";
    });

    async function sendEmail() {
      const email = (emailInput.value || "").trim();
      const profile = window._lpfProfile || "";
      if (!email) {
        feedbackEl.textContent = "Veuillez saisir votre adresse e-mail.";
        feedbackEl.style.color = "red";
        return;
      }
      sendBtn.disabled = true;
      feedbackEl.textContent = "‚è≥ Envoi en cours‚Ä¶";
      feedbackEl.style.color = "#555";

      try {
        const res = await fetch("/submit-email", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, profile })
        });
        const j = await res.json();
        if (j.ok) {
          feedbackEl.textContent = "‚úÖ Merci ! Votre profil a bien √©t√© envoy√©. Vous recevrez votre guide sous peu.";
          feedbackEl.style.color = "green";
          emailInput.value = "";
        } else {
          feedbackEl.textContent = "‚ùå Erreur : " + (j.error || "impossible d‚Äôenvoyer vos donn√©es");
          feedbackEl.style.color = "red";
        }
      } catch (e) {
        feedbackEl.textContent = "‚ùå Erreur r√©seau : r√©essayez dans un instant.";
        feedbackEl.style.color = "red";
      } finally {
        sendBtn.disabled = false;
      }
    }

    sendBtn.addEventListener("click", sendEmail);
    emailInput.addEventListener("keypress", (e) => { if (e.key === "Enter") sendEmail(); });
  </script>
</body>
</html>

