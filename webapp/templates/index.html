<!DOCTYPE html>
<html lang="fr">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1">
Â  <title>Quiz â€” ÃŠtes-vous fait pour Ãªtre gestionnaire de paie ? | La Paie Facile</title>
Â  <meta name="description" content="DÃ©couvrez si le mÃ©tier de gestionnaire de paie est fait pour vous grÃ¢ce Ã  ce quiz interactif La Paie Facile.">

Â  Â  <style>
Â  Â  body { margin: 0; background: #fff; color: #111; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
Â  Â  #email-block { max-width: 860px; margin: 40px auto; padding: 0 16px; text-align: center; }
Â  Â  #email { padding: 12px 14px; border: 2px solid #000; border-radius: 10px; width: 70%; max-width: 420px; font-size: 1rem; }
Â  Â  .lpf-btn { background:#2AFF00; color:#000; font-weight:900; font-size:1.06rem; padding:12px 18px; border:none; border-radius:12px; cursor:pointer; box-shadow: 0 3px 0 rgba(0,0,0,.7); transition: transform .12s, background .12s; }
Â  Â  .lpf-btn:hover { background:#20de00; transform: translateY(-1px); }
Â  Â  .feedback { font-weight: 600; margin-top: 10px; }
Â  </style>
</head>

<body>
Â  Â  Â  Â  <div id="lpf-quiz-root"></div>

Â  <style>
Â  Â  /* ===== LPF Styles (scopÃ©s) ===== */
Â  Â  #lpf-quiz-root { font-family: Inter, system-ui, Arial, sans-serif; color:#111; max-width: 860px; margin: 32px auto; padding: 0 16px; }
Â  Â  #lpf-quiz-root * { box-sizing: border-box; }
Â  Â  #lpf-quiz-root .lpf-card { background:#fff; border:6px solid #000; border-radius:24px; padding:24px 20px; margin:20px 0; box-shadow: 0 6px 0 rgba(0,0,0,.06); }
Â  Â  #lpf-quiz-root h2 { font-size:1.6rem; margin:0 0 10px; }
Â  Â  #lpf-quiz-root p { line-height:1.55; }

Â  Â  /* Progression */
Â  Â  #lpf-quiz-root .lpf-progress { display:flex; gap:10px; align-items:center; margin: 12px 0 8px; }
Â  Â  #lpf-quiz-root .lpf-progress-bar { flex:1; background:#eee; height:10px; border-radius:6px; border:2px solid #000; position:relative; }
Â  Â  #lpf-quiz-root .lpf-progress-bar span { display:block; background:#2AFF00; height:100%; border-radius:4px; transition: width .2s ease; width:0%; }
Â  Â  #lpf-quiz-root .lpf-progress-label { min-width: 120px; font-weight: 800; text-align: right; }

Â  Â  /* Section micro-intros */
Â  Â  #lpf-quiz-root .lpf-section-intro { border:3px dashed #000; border-radius:16px; padding:12px 14px; margin:12px 0; background:#f9f9f9; font-weight: 600; }

Â  Â  /* Questions & options */
Â  Â  #lpf-quiz-root .lpf-question { font-weight: 800; font-size:1.14rem; margin-bottom: 12px; }
Â  Â  #lpf-quiz-root fieldset { border:0; padding:0; margin:0; }
Â  Â  #lpf-quiz-root legend.lpf-question { padding:0; }
Â  Â  #lpf-quiz-root .lpf-options { display: grid; gap: 10px; }
Â  Â  #lpf-quiz-root .lpf-option { display:flex; gap:10px; align-items:flex-start; padding:12px 14px; border:2px solid #000; border-radius:12px; background:#fff; cursor:pointer; transition: transform .08s ease; }
Â  Â  #lpf-quiz-root .lpf-option:hover { transform: translateY(-1px); }
Â  Â  #lpf-quiz-root .lpf-option input { margin-top: 2px; }
Â  Â  /* SÃ©lection visible */
Â  Â  #lpf-quiz-root .lpf-option:has(input:checked) { outline: 3px solid #000; outline-offset: 2px; box-shadow: 0 0 0 3px rgba(0,0,0,.05) inset; }
Â  Â  .no-has #lpf-quiz-root .lpf-option.is-checked { outline: 3px solid #000; outline-offset: 2px; box-shadow: 0 0 0 3px rgba(0,0,0,.05) inset; }

Â  Â  /* Focus clavier visible */
Â  Â  #lpf-quiz-root .lpf-option:focus-visible,
Â  Â  #lpf-quiz-root .lpf-btn:focus-visible { outline: 3px solid #000; outline-offset: 3px; border-radius: 10px; }

Â  Â  /* Actions / boutons LPF */
Â  Â  #lpf-quiz-root .lpf-actions { display:flex; gap:10px; justify-content: flex-end; margin-top: 18px; }
Â  Â  #lpf-quiz-root .lpf-btn {
Â  Â  Â  background:#2AFF00; color:#000; font-weight: 900; font-size:1.06rem; padding:12px 18px;
Â  Â  Â  border:none; border-radius: 12px; cursor:pointer; box-shadow: 0 3px 0 rgba(0,0,0,.7); transition: transform .12s, background .12s;
Â  Â  }
Â  Â  #lpf-quiz-root .lpf-btn:hover { background:#20de00; transform: translateY(-1px); }
Â  Â  #lpf-quiz-root .lpf-btn.ghost { background:#fff; border:2px solid #000; box-shadow:none; font-weight: 800; }
Â  Â  #lpf-quiz-root .lpf-btn[disabled] { opacity:.5; cursor:not-allowed; }

Â  Â  /* Break & Result */
Â  Â  #lpf-quiz-root .lpf-break h3 { margin: 0 0 6px; }
Â  Â  #lpf-quiz-root .lpf-break p { margin: 6px 0; }
Â  Â  #lpf-quiz-root .lpf-result h2 { margin-top:0; }
Â  Â  #lpf-quiz-root .lpf-result .body { margin-top: 8px; }

Â  Â  /* Reduced motion */
Â  Â  @media (prefers-reduced-motion: reduce){
Â  Â  Â  #lpf-quiz-root * { transition: none !important; animation: none !important; }
Â  Â  }

Â  Â  @media (max-width:560px){
Â  Â  Â  #lpf-quiz-root .lpf-actions { flex-direction: column; }
Â  Â  Â  #lpf-quiz-root .lpf-btn, #lpf-quiz-root .lpf-btn.ghost { width: 100%; }
Â  Â  }
Â  </style>

Â  <script>
Â  (function(){
Â  Â  /* ====== PARAMS ====== */
Â  Â  // MODIFICATION 1 : GUIDE_URL est vide pour forcer la validation par e-mail via Systeme.io
Â  Â  const GUIDE_URL = ""; 
Â  Â  const PROG = [20,30,40,50,55,60,70,75,80,85,95,100]; // progression affichÃ©e

Â  Â  /* DÃ©tection support :has() (fallback classe .no-has) */
Â  Â  try{ document.querySelector(':has(*)'); } catch(e){ document.documentElement.classList.add('no-has'); }

Â  Â  /* Contenus d'intro */
Â  Â  const TEXT = {
Â  Â  Â  start: {
Â  Â  Â  Â  title: "Quiz Â« ÃŠtes-vous fait pour Ãªtre gestionnaire de paie ? Â»",
Â  Â  Â  Â  body: [
Â  Â  Â  Â  Â  "DÃ©couvrez ce qui vous motive vraiment au travail et si le mÃ©tier de gestionnaire de paie vous correspond.",
Â  Â  Â  Â  Â  "Â« Tout le monde sait ce quâ€™il faitâ€¦ mais trÃ¨s peu savent pourquoi ils le font. Â» â€” Simon Sinek",
Â  Â  Â  Â  Â  "Avant de choisir votre prochaine Ã©tape professionnelle, prenez un moment pour comprendre ce qui vous anime vraiment.",
Â  Â  Â  Â  Â  "Ce quiz interactif vous invite Ã  un voyage simple et puissant pour avancer avec clartÃ© et confiance.",
Â  Â  Â  Â  Â  "Ce nâ€™est pas un test ordinaire : câ€™est un outil pour vous reconnecter Ã  ce qui vous anime profondÃ©ment."
Â  Â  Â  Â  ],
Â  Â  Â  Â  cta: "ğŸš€ Câ€™est parti"
Â  Â  Â  },
Â  Â  Â  instructions: {
Â  Â  Â  Â  title: "Avant de commencer",
Â  Â  Â  Â  ps: [
Â  Â  Â  Â  Â  "Ce quiz comprend <strong>une dizaine de questions simples</strong>, Ã  complÃ©ter en <strong>3 Ã  5 minutes</strong>.",
Â  Â  Â  Â  Â  "Ã€ chaque Ã©tape, choisissez la rÃ©ponse <strong>qui vous correspond le mieux</strong>.",
Â  Â  Â  Â  Â  "Il nâ€™y a <strong>ni bonnes ni mauvaises rÃ©ponses</strong> : chacune rÃ©vÃ¨le une part de votre force.",
Â  Â  Â  Â  Â  "Une <strong>barre de progression</strong> vous montre votre avancement : chaque Ã©tape franchie vous rapproche du rÃ©sultat.",
Â  Â  Â  Â  Â  "âš ï¸ Pour un portrait fiable, <strong>rÃ©pondez Ã  toutes les questions</strong>.",
Â  Â  Â  Â  Â  "Ã€ la fin, vous recevrez votre <strong>profil expliquÃ©</strong>, le <strong>danger Ã  Ã©viter</strong> et le <strong>guide complet</strong> pour rÃ©ussir concrÃ¨tement.",
Â  Â  Â  Â  Â  "<em>Câ€™est rapide, simple et 100 % confidentiel.</em>"
Â  Â  Â  Â  ],
Â  Â  Â  Â  cta: "ğŸ¯ Commencer le quiz"
Â  Â  Â  },
Â  Â  Â  micro: {
Â  Â  Â  Â  a: "RÃ©pondez spontanÃ©ment : la premiÃ¨re idÃ©e est souvent la bonne.",
Â  Â  Â  Â  b: "Continuez sur votre lancÃ©e : vous avancez trÃ¨s bien.",
Â  Â  Â  Â  c: "DerniÃ¨re ligne droite : votre portrait se prÃ©cise."
Â  Â  Â  },
Â  Â  Â  breaks: {
Â  Â  Â  Â  after4: {
Â  Â  Â  Â  Â  h: "PremiÃ¨re Ã©tape rÃ©ussie",
Â  Â  Â  Â  Â  t: "Vous avez posÃ© des bases solides. Continuez : vous tenez un bon rythme.",
Â  Â  Â  Â  Â  s: "Vous avez dÃ©jÃ  parcouru 50 % du chemin."
Â  Â  Â  Â  },
Â  Â  Â  Â  after8: {
Â  Â  Â  Â  Â  h: "DeuxiÃ¨me Ã©tape complÃ©tÃ©e",
Â  Â  Â  Â  Â  t: "Plus que quelques questions pour affiner votre portrait.",
Â  Â  Â  Â  Â  s: "Vous Ãªtes dÃ©jÃ  Ã  75 % du parcours."
Â  Â  Â  Â  },
Â  Â  Â  Â  final: {
Â  Â  Â  Â  Â  h: "Bravo, vous Ãªtes allÃ©(e) jusquâ€™au bout",
Â  Â  Â  Â  Â  t: "Votre profil est prÃªt : forces + danger Ã  Ã©viter, avec les prochaines Ã©tapes.",
Â  Â  Â  Â  Â  cta: "Voir mon rÃ©sultat"
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  };

Â  Â  /* Questions */
Â  Â  const QUESTIONS = [
Â  Â  Â  // Bloc A (1..4)
Â  Â  Â  { id:"q1", block:"a", text:"Quâ€™est-ce qui vous motive le plus dans votre travail ?", options:[
Â  Â  Â  Â  {label:"Contribuer Ã  la justice et Ã  lâ€™Ã©quitÃ©", profile:"gardien"},
Â  Â  Â  Â  {label:"Organiser et mettre de lâ€™ordre", profile:"organisateur"},
Â  Â  Â  Â  {label:"Relever des dÃ©fis et rÃ©soudre des problÃ¨mes", profile:"resolveur"},
Â  Â  Â  Â  {label:"Communiquer et aider les autres", profile:"communicant"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q2", block:"a", text:"Quelle valeur compte le plus pour vous au quotidien ?", options:[
Â  Â  Â  Â  {label:"Lâ€™Ã©quitÃ© â€“ garantir un traitement juste", profile:"gardien"},
Â  Â  Â  Â  {label:"Lâ€™organisation â€“ un cadre structurÃ©", profile:"organisateur"},
Â  Â  Â  Â  {label:"La fiabilitÃ© â€“ on peut compter sur vous", profile:"collaborateur"},
Â  Â  Â  Â  {label:"Lâ€™apprentissage â€“ Ã©voluer en continu", profile:"curieux"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q3", block:"a", text:"Quâ€™est-ce qui vous attire dans la gestion de la paie ?", options:[
Â  Â  Â  Â  {label:"Assurer une paie correcte et conforme pour tous", profile:"gardien"},
Â  Â  Â  Â  {label:"ÃŠtre au cÅ“ur du fonctionnement et de la stabilitÃ©", profile:"organisateur"},
Â  Â  Â  Â  {label:"MaÃ®triser un domaine technique exigeant", profile:"expert"},
Â  Â  Â  Â  {label:"Allier chiffres et accompagnement des personnes", profile:"communicant"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q4", block:"a", text:"Quâ€™est-ce qui vous donne le plus le sentiment dâ€™Ãªtre utile ?", options:[
Â  Â  Â  Â  {label:"Aider concrÃ¨tement quelquâ€™un", profile:"collaborateur"},
Â  Â  Â  Â  {label:"RÃ©soudre un problÃ¨me Ã©pineux", profile:"resolveur"},
Â  Â  Â  Â  {label:"Respecter les Ã©chÃ©ances et les rÃ¨gles", profile:"organisateur"},
Â  Â  Â  Â  {label:"Apprendre quelque chose de nouveau", profile:"curieux"}
Â  Â  Â  ]},

Â  Â  Â  // Bloc B (5..8)
Â  Â  Â  { id:"q5", block:"b", text:"Laquelle de ces phrases vous ressemble le plus au travail ?", options:[
Â  Â  Â  Â  {label:"Je planifie mÃ©thodiquement mes tÃ¢ches", profile:"organisateur"},
Â  Â  Â  Â  {label:"Je vÃ©rifie chaque dÃ©tail pour Ã©viter les erreurs", profile:"expert"},
Â  Â  Â  Â  {label:"Je prends des initiatives et jâ€™avance en autonomie", profile:"strategique"},
Â  Â  Â  Â  {label:"Je collabore et je facilite la communication", profile:"communicant"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q6", block:"b", text:"Face Ã  une nouvelle tÃ¢che complexe, vous avez tendance Ã â€¦", options:[
Â  Â  Â  Â  {label:"Vous documenter et vous former", profile:"curieux"},
Â  Â  Â  Â  {label:"DÃ©couper en Ã©tapes structurÃ©es", profile:"organisateur"},
Â  Â  Â  Â  {label:"Voir Ã§a comme un dÃ©fi stimulant", profile:"resolveur"},
Â  Â  Â  Â  {label:"Demander conseil aux plus expÃ©rimentÃ©s", profile:"communicant"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q7", block:"b", text:"En cas dâ€™imprÃ©vu ou dâ€™urgence, vousâ€¦", options:[
Â  Â  Â  Â  {label:"Gardez votre calme et analysez", profile:"resolveur"},
Â  Â  Â  Â  {label:"Priorisez et vous organisez aussitÃ´t", profile:"organisateur"},
Â  Â  Â  Â  {label:"Informez et coordonnez lâ€™entraide", profile:"communicant"},
Â  Â  Â  Â  {label:"Appliquez les rÃ¨gles et la technique", profile:"expert"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q8", block:"b", text:"Le compliment qui vous fait le plus plaisir :", options:[
Â  Â  Â  Â  {label:"Â« On peut toujours compter sur vous Â»", profile:"collaborateur"},
Â  Â  Â  Â  {label:"Â« Câ€™est toujours bien organisÃ© et sans erreur Â»", profile:"organisateur"},
Â  Â  Â  Â  {label:"Â« Vous trouvez toujours la solution Â»", profile:"resolveur"},
Â  Â  Â  Â  {label:"Â« Votre pÃ©dagogie nous aide Ã©normÃ©ment Â»", profile:"communicant"}
Â  Â  Â  ]},

Â  Â  Â  // Bloc C (9..12)
Â  Â  Â  { id:"q9", block:"c", text:"Quelle activitÃ© vous attire le plus ?", options:[
Â  Â  Â  Â  {label:"Analyser des chiffres et vÃ©rifier des calculs", profile:"expert"},
Â  Â  Â  Â  {label:"Mettre en place un tableau dâ€™organisation", profile:"organisateur"},
Â  Â  Â  Â  {label:"Expliquer un bulletin de paie Ã  un collÃ¨gue", profile:"communicant"},
Â  Â  Â  Â  {label:"Veiller au respect des rÃ¨gles et procÃ©dures", profile:"gardien"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q10", block:"c", text:"Parmi ces tÃ¢ches, laquelle prÃ©fÃ©rez-vous ?", options:[
Â  Â  Â  Â  {label:"Le droit / la gestion", profile:"gardien"},
Â  Â  Â  Â  {label:"La comptabilitÃ© / les mathÃ©matiques", profile:"expert"},
Â  Â  Â  Â  {label:"Les Ã©tudes de cas complexes", profile:"resolveur"},
Â  Â  Â  Â  {label:"Les travaux en groupe avec entraide", profile:"communicant"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q11", block:"c", text:"Dans un poste administratif, vous aimez surtoutâ€¦", options:[
Â  Â  Â  Â  {label:"La prÃ©cision des procÃ©dures", profile:"gardien"},
Â  Â  Â  Â  {label:"AmÃ©liorer les mÃ©thodes et les outils", profile:"strategique"},
Â  Â  Â  Â  {label:"ÃŠtre la personne rÃ©fÃ©rente sur le technique", profile:"expert"},
Â  Â  Â  Â  {label:"Accompagner et informer les autres", profile:"communicant"}
Â  Â  Â  ]},
Â  Â  Â  { id:"q12", block:"c", text:"Ce qui vous enthousiasmerait le plus en paie :", options:[
Â  Â  Â  Â  {label:"Garantir une paie juste et conforme", profile:"gardien"},
Â  Â  Â  Â  {label:"Organiser le calendrier et les Ã©chÃ©ances", profile:"organisateur"},
Â  Â  Â  Â  {label:"MaÃ®triser les dÃ©tails techniques et les logiciels", profile:"expert"},
Â  Â  Â  Â  {label:"Conseiller les collaborateurs", profile:"communicant"}
Â  Â  Â  ]}
Â  Â  ];

Â  Â  /* PondÃ©rations internes */
Â  Â  const WEIGHTS = { a:0.5, b:0.3, c:0.2 };
Â  Â  const TIE = ["gardien","organisateur","expert","resolveur","communicant","collaborateur","strategique","curieux"];

Â  Â  /* ====== TES 8 TEXTES DE RÃ‰SULTAT (injection HTML) - MODIFIÃ‰ POUR EMAIL-WALL ====== */
Â  Â  const RESULTS = {
Â  Â  Â  gardien: {
Â  Â  Â  Â  title: "Vous Ãªtes : Gardien de lâ€™Ã‰quitÃ©",
Â  Â  Â  Â  body: `Le gestionnaire de paie est le garant de lâ€™Ã©quitÃ© au sein de lâ€™entreprise. Son rÃ´le ne se limite pas Ã  Ã©tablir des bulletins de paie : il veille Ã  ce que chaque salariÃ© reÃ§oive exactement ce qui lui est dÃ», conformÃ©ment Ã  la lÃ©gislation sociale en constante Ã©volution. Cela implique la prÃ©paration rigoureuse des salaires, la gestion prÃ©cise des dÃ©clarations sociales obligatoires, la prise en compte des absences, primes, heures supplÃ©mentaires, ainsi que le respect scrupuleux des Ã©chÃ©ances.
<br><br>Câ€™est un mÃ©tier Ã  haute responsabilitÃ©, au croisement du juridique, du technique et de lâ€™organisation, oÃ¹ chaque erreur peut avoir des consÃ©quences financiÃ¨res et humaines majeures.
<br><br>En tant que Gardien de lâ€™Ã‰quitÃ©, vous incarnez la rigueur et le sens du juste. Votre intÃ©gritÃ© vous positionne comme un pilier fiable dans un environnement oÃ¹ la prÃ©cision est essentielle pour Ã©viter les inÃ©galitÃ©s ou litiges. Votre capacitÃ© Ã  expliquer clairement les rÃ¨gles complexes aux salariÃ©s ajoute une dimension humaine prÃ©cieuse, rassurante et pÃ©dagogique.
<br><br><strong>âš ï¸ Cependant</strong>, votre quÃªte absolue de justice peut parfois gÃ©nÃ©rer du stress, surtout face Ã  lâ€™incertitude juridique ou aux subtilitÃ©s changeantes des rÃ¨gles de paie. Un paramÃ©trage oubliÃ© ou une interprÃ©tation erronÃ©e peuvent paradoxalement crÃ©er lâ€™injustice que vous souhaitez combattre.
<br><br>La clÃ© pour vous est dâ€™asseoir votre expertise sur une connaissance solide des fondamentaux associÃ©e Ã  une vision globale apaisÃ©e et structurÃ©e de la paie.
<br><br><strong>ğŸ‘‰ Pour transformer cette rigueur en un vÃ©ritable atout durable et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  },
Â  Â  Â  organisateur: {
Â  Â  Â  Â  title: "Vous Ãªtes : Organisateur MÃ©thodique",
Â  Â  Â  Â  body: `Le gestionnaire de paie a la lourde responsabilitÃ© de piloter lâ€™ensemble des opÃ©rations liÃ©es au salaire des collaborateurs : Ã©laboration prÃ©cise des bulletins de paie, suivi rigoureux des dÃ©clarations sociales, respect impÃ©ratif des Ã©chÃ©ances mensuelles, et gestion sÃ©curisÃ©e des donnÃ©es sensibles. Au cÅ“ur de ce mÃ©tier complexe, se conjuguent des compÃ©tences techniques pointues, une connaissance fine du cadre juridique, et une organisation sans faille. Chaque Ã©lÃ©ment doit Ãªtre orchestrÃ© avec rigueur, efficacitÃ© et adaptabilitÃ© pour Ã©viter erreurs et retards coÃ»teux.
<br><br>En tant quâ€™Organisateur MÃ©thodique, votre force est votre capacitÃ© Ã  structurer, anticiper et maintenir un ordre irrÃ©prochable. Vous excellez dans la planification des tÃ¢ches et le suivi des cycles paie, des points essentiels dans un mÃ©tier rythmÃ© par des Ã©chÃ©ances prÃ©cises et contraignantes. Votre profil rÃ©vÃ¨le Ã©galement une affinitÃ© pour la prÃ©cision technique, proche du rÃ´le dâ€™expert technique, ce qui vous permet dâ€™Ãªtre aussi efficace sur la forme que sur le fond.
<br><br><strong>âš ï¸ Cependant</strong>, la gestion des imprÃ©vus â€” absences soudaines, variables de derniÃ¨re minute, Ã©volutions rÃ©glementaires frÃ©quentes â€” peut mettre Ã  lâ€™Ã©preuve votre organisation. Le succÃ¨s repose alors sur votre capacitÃ© Ã  ajuster vos prioritÃ©s, Ã  rester flexible tout en gardant le cap sur lâ€™essentiel.
<br><br><strong>ğŸ‘‰ Pour transformer cette organisation naturelle en un puissant levier de rÃ©ussite et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  },
Â  Â  Â  resolveur: {
Â  Â  Â  Â  title: "Vous Ãªtes : RÃ©solveur de ProblÃ¨mes",
Â  Â  Â  Â  body: `Le gestionnaire de paie jongle chaque mois avec un grand nombre dâ€™informations complexes : calculs prÃ©cis, variables spÃ©cifiques Ã  chaque salariÃ©, Ã©volutions lÃ©gales frÃ©quentes, dÃ©clarations sociales et corrections dâ€™anomalies. Son mÃ©tier est un subtil Ã©quilibre entre technique, rÃ©glementation et organisation, oÃ¹ chaque situation exceptionnelle demande une vigilance et une rÃ©activitÃ© accrues.
<br><br>Vous Ãªtes avant tout un RÃ©solveur de ProblÃ¨mes : vous aimez analyser en profondeur, comprendre les mÃ©canismes et surtout trouver des solutions efficaces. Cette capacitÃ© Ã  dÃ©bloquer les cas particuliers et Ã  corriger les anomalies est prÃ©cieuse dans un environnement oÃ¹ chaque dÃ©tail compte et oÃ¹ lâ€™adaptabilitÃ© est essentielle. Votre profil rÃ©vÃ¨le Ã©galement une dimension dâ€™organisateur mÃ©thodique, ce qui vous permet de ne pas perdre de vue les Ã©chÃ©ances cruciales.
<br><br><strong>âš ï¸ Toutefois</strong>, en vous concentrant trop longuement sur un problÃ¨me isolÃ©, vous risquez de perdre le fil global, ce qui pourrait compromettre le respect des dÃ©lais et fragiliser lâ€™ensemble du cycle paie.
<br><br><strong>ğŸ‘‰ Pour canaliser votre esprit analytique tout en assurant la ponctualitÃ© indispensable et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  },
Â  Â  Â  communicant: {
Â  Â  Â  Â  title: "Vous Ãªtes : Communicant Responsable",
Â  Â  Â  Â  body: `Le gestionnaire de paie ne se limite pas Ã  des chiffres dans des tableaux. Câ€™est souvent un interlocuteur privilÃ©giÃ© pour les salariÃ©s qui souhaitent comprendre leur fiche de paie, poser des questions ou Ãªtre rassurÃ©s. Ce mÃ©tier demande donc autant de compÃ©tences humaines que techniques : vous Ãªtes le lien essentiel entre la complexitÃ© rÃ©glementaire et les attentes des collaborateurs.
<br><br>Vous Ãªtes avant tout un Communicant Responsable : vous savez expliquer avec clartÃ©, Ã©couter activement et transmettre les informations de faÃ§on rassurante. Votre rÃ´le de mÃ©diateur crÃ©e un climat de confiance indispensable dans une pÃ©riode sensible oÃ¹ la paie impacte directement le quotidien des salariÃ©s. Votre profil dÃ©voile Ã©galement une bonne organisation, qui vous permet de gÃ©rer efficacement votre charge de travail tout en restant disponible.
<br><br><strong>âš ï¸ Attention</strong> cependant, votre sens du service et votre disponibilitÃ© peuvent Ãªtre source de dispersion. En voulant rÃ©pondre Ã  toutes les sollicitations, vous risquez de nÃ©gliger la rigueur technique indispensable Ã  la sÃ©curitÃ© des paies.
<br><br><strong>ğŸ‘‰ Pour trouver lâ€™Ã©quilibre parfait entre communication et prÃ©cision et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  },
Â  Â  Â  expert: {
Â  Â  Â  Â  title: "Vous Ãªtes : Expert Technique",
Â  Â  Â  Â  body: `Le mÃ©tier de gestionnaire de paie repose sur une maÃ®trise technique pointue. Il s'agit de gÃ©rer des rÃ¨gles juridiques complexes, d'effectuer des calculs prÃ©cis des cotisations sociales, de paramÃ©trer avec rigueur des logiciels spÃ©cialisÃ©s, et de garantir la conformitÃ© avec les lois et conventions collectives. Dans ce domaine, chaque dÃ©tail a son importance et peut avoir des consÃ©quences majeures, tant pour lâ€™entreprise que pour les salariÃ©s.
<br><br>Vous Ãªtes avant tout un Expert Technique : vous aimez comprendre en profondeur les rÃ¨gles, vÃ©rifier minutieusement les chiffres, et produire des documents impeccables. Votre rigueur et votre souci du dÃ©tail font de vous un pilier indispensable dans la chaÃ®ne de la paie. Votre profil rÃ©vÃ¨le aussi une capacitÃ© dâ€™analyse forte, un atout prÃ©cieux pour dÃ©tecter et rÃ©soudre rapidement les anomalies.
<br><br><strong>âš ï¸ Cependant</strong>, votre immersion dans la complexitÃ© technique peut parfois vous faire perdre la vision dâ€™ensemble et vous isoler dans les dÃ©tails, au risque de passer Ã  cÃ´tÃ© des enjeux plus globaux.
<br><br><strong>ğŸ‘‰ Pour renforcer et structurer vos compÃ©tences techniques tout en gardant une perspective stratÃ©gique et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  },
Â  Â  Â  strategique: {
Â  Â  Â  Â  title: "Vous Ãªtes : StratÃ©gique Visionnaire",
Â  Â  Â  Â  body: `Le gestionnaire de paie ne se limite plus Ã  un simple rÃ´le technique. Il est aujourdâ€™hui un acteur clÃ© de la performance globale de lâ€™entreprise. Au-delÃ  de la prÃ©paration des bulletins de salaire, il optimise les processus, pilote les outils numÃ©riques, anticipe les Ã©volutions rÃ©glementaires, et contribue aux stratÃ©gies de Ressources Humaines. Son expertise nourrit les dÃ©cisions stratÃ©giques pour garantir la conformitÃ©, la satisfaction des collaborateurs et la stabilitÃ© financiÃ¨re de lâ€™entreprise.
<br><br>Vous Ãªtes avant tout un StratÃ©gique Visionnaire : vous aimez prendre du recul, observer les systÃ¨mes dans leur globalitÃ©, et identifier les leviers dâ€™amÃ©lioration. Vous refusez la routine, voyant la paie comme un processus Ã  faire Ã©voluer en continu. Votre capacitÃ© Ã  innover sâ€™appuie sur une base solide dâ€™organisation, indispensable pour concrÃ©tiser vos ambitions et transformer la stratÃ©gie en rÃ©sultats opÃ©rationnels.
<br><br><strong>âš ï¸ Pourtant</strong>, si vous nÃ©gligez les fondamentaux du quotidien â€” la maÃ®trise des calculs, le respect des Ã©chÃ©ances et la conformitÃ© â€” votre vision ambitieuse risque de rester thÃ©orique et sans impact concret.
<<br><strong>ğŸ‘‰ Pour poser les fondations solides de votre avenir stratÃ©gique et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  },
Â  Â  Â  collaborateur: {
Â  Â  Â  Â  title: "Vous Ãªtes : Collaborateur Discret et Fiable",
Â  Â  Â  Â  body: `Le mÃ©tier de gestionnaire de paie repose sur une exigence absolue de confidentialitÃ© et de fiabilitÃ©. Vous traitez au quotidien des donnÃ©es sensibles : salaires, absences, contrats, informations personnelles prÃ©cises qui demandent un respect rigoureux des rÃ¨gles de confidentialitÃ©. Chaque salariÃ© doit pouvoir vous faire pleinement confiance, car une erreur ou une fuite dâ€™information pourrait entraÃ®ner des consÃ©quences lourdes tant humaines que juridiques.
<br><br>Vous Ãªtes avant tout un Collaborateur Discret et Fiable : sÃ©rieux, loyal et constant, vous Ãªtes la personne sur laquelle lâ€™entreprise sâ€™appuie pour assurer des paies justes, conformes et sÃ©curisÃ©es. Votre sens aigu de lâ€™Ã©quitÃ© vient renforcer ce statut, faisant de vous un acteur clÃ© dans la justice salariale au quotidien.
<br><br><strong>âš ï¸ Cependant</strong>, votre discrÃ©tion et votre modestie peuvent freiner la reconnaissance de vos compÃ©tences et limiter vos perspectives dâ€™Ã©volution professionnelle.
<br><br><strong>ğŸ‘‰ Pour valoriser vos atouts, renforcer votre confiance et avancer sereinement dans votre carriÃ¨re et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  },
Â  Â  Â  curieux: {
Â  Â  Â  Â  title: "Vous Ãªtes : Curieux Apprenant",
Â  Â  Â  Â  body: `Le domaine de la paie est en constante Ã©volution : les lois changent rÃ©guliÃ¨rement, les conventions collectives sont mises Ã  jour, et les logiciels se modernisent sans cesse. Pour rÃ©ussir dans ce mÃ©tier dynamique, il faut absolument Ãªtre capable dâ€™apprendre en continu et dâ€™adapter ses connaissances au fil des nouveautÃ©s.
<br><br>Vous Ãªtes avant tout un Curieux Apprenant : vous aimez dÃ©couvrir, progresser et explorer de nouveaux savoirs. Cette curiositÃ© est un moteur puissant dans un environnement qui bouge sans cesse. Votre profil rÃ©vÃ¨le aussi une capacitÃ© naturelle Ã  communiquer et partager vos apprentissages, une qualitÃ© prÃ©cieuse pour Ã©voluer en Ã©quipe.
<br><br><strong>âš ï¸ Attention</strong> cependant : sans un plan clair et structurÃ©, vous risquez de vous disperser et de manquer de bases solides, ce qui pourrait ralentir votre progression.
<br><br><strong>ğŸ‘‰ Pour structurer vos apprentissages et progresser efficacement et recevoir votre guide complet, renseignez votre adresse e-mail dans le bloc ci-dessous.</strong>`
Â  Â  Â  }
Â  Â  };

Â  Â  /* ===== Utils ===== */
Â  Â  function seedRng(seed){
Â  Â  Â  let x = 0; for (let i=0;i<seed.length;i++) x = (x<<5) - x + seed.charCodeAt(i) | 0;
Â  Â  Â  return ()=>{ x ^= x<<13; x ^= x>>>17; x ^= x<<5; return ((x>>>0) / 4294967295); };
Â  Â  }
Â  Â  function stableShuffle(arr, seed){
Â  Â  Â  const rnd = seedRng(seed);
Â  Â  Â  return arr.map(v=>[rnd(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
Â  Â  }
Â  Â  function naiveSanitize(html){
Â  Â  Â  const tmp = document.createElement('div'); tmp.innerHTML = html;
Â  Â  Â  tmp.querySelectorAll('*').forEach(n=>{
Â  Â  Â  Â  const allowed = ['P','BR','STRONG','EM','UL','OL','LI','H2','H3','A'];
Â  Â  Â  Â  if(!allowed.includes(n.tagName)) n.replaceWith(...n.childNodes);
Â  Â  Â  Â  if(n.tagName==='A'){
Â  Â  Â  Â  Â  [...n.attributes].forEach(a=>{ if(a.name.startsWith('on')) n.removeAttribute(a.name); });
Â  Â  Â  Â  Â  const href = (n.getAttribute('href')||'').trim().toLowerCase();
Â  Â  Â  Â  Â  if(href.startsWith('javascript:')) n.removeAttribute('href');
Â  Â  Â  Â  Â  n.setAttribute('rel','noopener noreferrer'); n.setAttribute('target','_blank');
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  Â  return tmp.innerHTML;
Â  Â  }

Â  Â  /* ===== Rendu ===== */
Â  Â  const root = document.getElementById("lpf-quiz-root");

Â  Â  function el(tag, attrs={}, children=[]) {
Â  Â  Â  const n = document.createElement(tag);
Â  Â  Â  Object.entries(attrs).forEach(([k,v])=>{
Â  Â  Â  Â  if(k==="class") n.className=v;
Â  Â  Â  Â  else if(k==="html") n.innerHTML=v;
Â  Â  Â  Â  else n.setAttribute(k,v);
Â  Â  Â  });
Â  Â  Â  (Array.isArray(children)?children:[children]).forEach(c=>{
Â  Â  Â  Â  if(typeof c==="string") n.appendChild(document.createTextNode(c));
Â  Â  Â  Â  else if(c) n.appendChild(c);
Â  Â  Â  });
Â  Â  Â  return n;
Â  Â  }

Â  Â  function renderStart() {
Â  Â  Â  root.innerHTML = "";
Â  Â  Â  const card = el("div",{class:"lpf-card"});
Â  Â  Â  card.appendChild(el("h2",{},TEXT.start.title));
Â  Â  Â  TEXT.start.body.forEach(p=> card.appendChild(el("p",{},p)));
Â  Â  Â  const actions = el("div",{class:"lpf-actions"},[
Â  Â  Â  Â  el("button",{class:"lpf-btn",type:"button"}, TEXT.start.cta)
Â  Â  Â  ]);
Â  Â  Â  actions.querySelector("button").addEventListener("click", renderInstructions);
Â  Â  Â  card.appendChild(actions);
Â  Â  Â  root.appendChild(card);
Â  Â  Â  actions.querySelector("button").focus();
Â  Â  }

Â  Â  function renderInstructions() {
Â  Â  Â  root.innerHTML = "";
Â  Â  Â  const card = el("div",{class:"lpf-card"});
Â  Â  Â  card.appendChild(el("h2",{},TEXT.instructions.title));
Â  Â  Â  TEXT.instructions.ps.forEach(html => card.appendChild(el("p",{html: naiveSanitize(html)})));
Â  Â  Â  const actions = el("div",{class:"lpf-actions"},[
Â  Â  Â  Â  el("button",{class:"lpf-btn",type:"button"}, TEXT.instructions.cta)
Â  Â  Â  ]);
Â  Â  Â  actions.querySelector("button").addEventListener("click", ()=>renderQuiz(0));
Â  Â  Â  card.appendChild(actions);
Â  Â  Â  root.appendChild(card);
Â  Â  Â  actions.querySelector("button").focus();
Â  Â  }

Â  Â  /* Ã‰tat */
Â  Â  let answers = []; // [{id, block, profile}]
Â  Â  let stepIndex = 0;

Â  Â  function renderQuiz(index){
Â  Â  Â  stepIndex = index;
Â  Â  Â  root.innerHTML = "";

Â  Â  Â  /* Progression (ARIA + live) */
Â  Â  Â  const progWrap = el("div",{class:"lpf-progress"});
Â  Â  Â  const bar = el("div",{class:"lpf-progress-bar", role:"progressbar", "aria-valuemin":"0","aria-valuemax":"100","aria-label":"Progression du quiz"});
Â  Â  Â  const fill = el("span",{id:"lpf-fill"});
Â  Â  Â  bar.appendChild(fill);
Â  Â  Â  const liveLabel = el("div",{class:"lpf-progress-label", "aria-live":"polite"}, el("span",{id:"lpf-label"},""));
Â  Â  Â  progWrap.appendChild(bar); progWrap.appendChild(liveLabel);
Â  Â  Â  root.appendChild(progWrap);

Â  Â  Â  const q = QUESTIONS[index];

Â  Â  Â  /* Micro-intro */
Â  Â  Â  if(index===0)Â  root.appendChild(el("div",{class:"lpf-section-intro"}, TEXT.micro.a));
Â  Â  Â  if(index===4)Â  root.appendChild(el("div",{class:"lpf-section-intro"}, TEXT.micro.b));
Â  Â  Â  if(index===8)Â  root.appendChild(el("div",{class:"lpf-section-intro"}, TEXT.micro.c));

Â  Â  Â  /* Carte question */
Â  Â  Â  const card = el("div",{class:"lpf-card"});
Â  Â  Â  const fieldset = el("fieldset");
Â  Â  Â  const legendId = q.id+"_legend";
Â  Â  Â  fieldset.appendChild(el("legend",{class:"lpf-question", id:legendId}, q.text));

Â  Â  Â  const optsWrap = el("div",{class:"lpf-options"});
Â  Â  Â  const prev = answers.find(a=>a.id===q.id);
Â  Â  Â  const opts = stableShuffle(q.options.slice(), q.id);
Â  Â  Â  opts.forEach((opt,i)=>{
Â  Â  Â  Â  const id = q.id+"_opt_"+i;
Â  Â  Â  Â  const labelEl = el("label",{class:"lpf-option", for:id});
Â  Â  Â  Â  const radio = el("input",{type:"radio",name:q.id,id,"data-profile":opt.profile});
Â  Â  Â  Â  if(prev && prev.profile===opt.profile) { radio.checked = true; labelEl.classList.add('is-checked'); }
Â  Â  Â  Â  labelEl.appendChild(radio);
Â  Â  Â  Â  labelEl.appendChild(el("span",{},opt.label));
Â  Â  Â  Â  optsWrap.appendChild(labelEl);
Â  Â  Â  });
Â  Â  Â  // fallback :has() â†’ maj classes
Â  Â  Â  optsWrap.addEventListener('change', (e)=>{
Â  Â  Â  Â  if(!document.documentElement.classList.contains('no-has')) return;
Â  Â  Â  Â  optsWrap.querySelectorAll('.lpf-option').forEach(l=>l.classList.remove('is-checked'));
Â  Â  Â  Â  const lbl = e.target.closest('.lpf-option'); if(lbl) lbl.classList.add('is-checked');
Â  Â  Â  });

Â  Â  Â  fieldset.appendChild(optsWrap);
Â  Â  Â  card.appendChild(fieldset);

Â  Â  Â  const actions = el("div",{class:"lpf-actions"});
Â  Â  Â  const prevBtn = el("button",{class:"lpf-btn ghost",type:"button"},"Revenir");
Â  Â  Â  const nextBtn = el("button",{class:"lpf-btn",type:"button"},"Continuer");
Â  Â  Â  actions.appendChild(prevBtn);
Â  Â  Â  actions.appendChild(nextBtn);
Â  Â  Â  card.appendChild(actions);
Â  Â  Â  root.appendChild(card);

Â  Â  Â  /* Boutons / Ã©tats */
Â  Â  Â  prevBtn.disabled = (index===0);
Â  Â  Â  nextBtn.disabled = !(prev); // activÃ© si rÃ©ponse existante

Â  Â  Â  card.addEventListener("change", (e)=>{
Â  Â  Â  Â  if(e.target && e.target.type==="radio"){ nextBtn.disabled = false; }
Â  Â  Â  });

Â  Â  Â  prevBtn.addEventListener("click", ()=>{
Â  Â  Â  Â  if(index>0){ renderQuiz(index-1); }
Â  Â  Â  });

Â  Â  Â  nextBtn.addEventListener("click", ()=>{
Â  Â  Â  Â  const checked = card.querySelector("input[type=radio]:checked");
Â  Â  Â  Â  if(!checked) return;
Â  Â  Â  Â  // remplace la rÃ©ponse de la question courante (pas de pop(), pas d'ordre supposÃ©)
Â  Â  Â  Â  answers = answers.filter(a => a.id !== q.id);
Â  Â  Â  Â  answers.push({ id:q.id, block:q.block, profile: checked.getAttribute("data-profile") });

Â  Â  Â  Â  if(index===3){ renderBreak("after4", index+1); return; }
Â  Â  Â  Â  if(index===7){ renderBreak("after8", index+1); return; }
Â  Â  Â  Â  if(index < QUESTIONS.length-1) renderQuiz(index+1);
Â  Â  Â  Â  else renderFinalGate();
Â  Â  Â  });

Â  Â  Â  /* Progression affichÃ©e + ARIA + live */
Â  Â  Â  const pct = PROG[index];
Â  Â  Â  fill.style.width = pct + "%";
Â  Â  Â  bar.setAttribute("aria-valuenow", pct);
Â  Â  Â  const labelSpan = document.getElementById("lpf-label");
Â  Â  Â  if(labelSpan) labelSpan.textContent = pct + " %";

Â  Â  Â  /* Focus management : focus 1Ê³áµ‰ radio sinon legend */
Â  Â  Â  const firstRadio = fieldset.querySelector('input[type=radio]');
Â  Â  Â  (firstRadio || fieldset.querySelector('legend')).focus();
Â  Â  }

Â  Â  function renderBreak(which, nextIndex){
Â  Â  Â  root.innerHTML = "";
Â  Â  Â  const p = PROG[nextIndex-1];
Â  Â  Â  const progWrap = el("div",{class:"lpf-progress"});
Â  Â  Â  const bar = el("div",{class:"lpf-progress-bar", role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":String(p),"aria-label":"Progression du quiz"});
Â  Â  Â  bar.appendChild(el("span",{style:"width:"+p+"%"}));
Â  Â  Â  const liveLabel = el("div",{class:"lpf-progress-label", "aria-live":"polite"}, p+" %");
Â  Â  Â  progWrap.appendChild(bar); progWrap.appendChild(liveLabel);
Â  Â  Â  root.appendChild(progWrap);

Â  Â  Â  const data = TEXT.breaks[which];
Â  Â  Â  const card = el("div",{class:"lpf-card lpf-break"});
Â  Â  Â  const h = el("h3",{}, data.h);
Â  Â  Â  card.appendChild(h);
Â  Â  Â  card.appendChild(el("p",{}, data.t));
Â  Â  Â  card.appendChild(el("p",{}, data.s));
Â  Â  Â  const actions = el("div",{class:"lpf-actions"},[
Â  Â  Â  Â  el("button",{class:"lpf-btn",type:"button"},"Continuer")
Â  Â  Â  ]);
Â  Â  Â  actions.querySelector("button").addEventListener("click", ()=>renderQuiz(nextIndex));
Â  Â  Â  card.appendChild(actions);
Â  Â  Â  root.appendChild(card);
Â  Â  Â  h.focus();
Â  Â  }

Â  Â  function renderFinalGate(){
Â  Â  Â  root.innerHTML = "";
Â  Â  Â  const progWrap = el("div",{class:"lpf-progress"});
Â  Â  Â  const bar = el("div",{class:"lpf-progress-bar", role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"100","aria-label":"Progression du quiz"});
Â  Â  Â  bar.appendChild(el("span",{style:"width:100%"}));
Â  Â  Â  const liveLabel = el("div",{class:"lpf-progress-label", "aria-live":"polite"},"100 %");
Â  Â  Â  progWrap.appendChild(bar); progWrap.appendChild(liveLabel);
Â  Â  Â  root.appendChild(progWrap);

Â  Â  Â  const data = TEXT.breaks.final;
Â  Â  Â  const card = el("div",{class:"lpf-card lpf-break"});
Â  Â  Â  const h = el("h3",{}, data.h);
Â  Â  Â  card.appendChild(h);
Â  Â  Â  card.appendChild(el("p",{}, data.t));
Â  Â  Â  const actions = el("div",{class:"lpf-actions"},[
Â  Â  Â  Â  el("button",{class:"lpf-btn",type:"button"}, data.cta)
Â  Â  Â  ]);
Â  Â  Â  actions.querySelector("button").addEventListener("click", renderResult);
Â  Â  Â  card.appendChild(actions);
Â  Â  Â  root.appendChild(card);
Â  Â  Â  h.focus();
Â  Â  }

Â  Â  /* ===== Scoring ===== */
Â  Â  function computeScores(){
Â  Â  Â  const profiles = ["gardien","organisateur","resolveur","communicant","expert","strategique","collaborateur","curieux"];
Â  Â  Â  const a={}, b={}, c={}; profiles.forEach(p=>{ a[p]=0; b[p]=0; c[p]=0; });

Â  Â  Â  answers.forEach(ans=>{
Â  Â  Â  Â  if(ans.block==="a") a[ans.profile] = (a[ans.profile]||0)+1;
Â  Â  Â  Â  if(ans.block==="b") b[ans.profile] = (b[ans.profile]||0)+1;
Â  Â  Â  Â  if(ans.block==="c") c[ans.profile] = (c[ans.profile]||0)+1;
Â  Â  Â  });

Â  Â  Â  const argmax = (obj) => { let best=null, bestV=-Infinity; for(const [k,v] of Object.entries(obj)){ if(v>bestV){best=k; bestV=v;} } return best; };
Â  Â  Â  const domA = argmax(a);
Â  Â  Â  const domB = argmax(b);
Â  Â  Â  const domC = argmax(c);

Â  Â  Â  const weighted = {};
Â  Â  Â  profiles.forEach(p=>{
Â  Â  Â  Â  weighted[p] = (WEIGHTS.a*(a[p]||0)) + (WEIGHTS.b*(b[p]||0)) + (WEIGHTS.c*(c[p]||0));
Â  Â  Â  });
Â  Â  Â  const maxV = Math.max(...profiles.map(p=>weighted[p]));
Â  Â  Â  const cands = profiles.filter(p=> weighted[p]===maxV);

Â  Â  Â  let global = cands[0];
Â  Â  Â  if(cands.length>1){
Â  Â  Â  Â  if(domA && cands.includes(domA)) global = domA;
Â  Â  Â  Â  else if(domB && cands.includes(domB)) global = domB;
Â  Â  Â  Â  else { for(const pr of TIE){ if(cands.includes(pr)){ global = pr; break; } } }
Â  Â  Â  }
Â  Â  Â  return { global, domA, domB, domC };
Â  Â  }

Â  Â  /* ===== Rendu du rÃ©sultat (injecte title + body en HTML) - MODIFIÃ‰ POUR EMAIL-WALL ===== */
Â  Â  function renderResult(){
Â  Â  Â  const s = computeScores();
Â  Â  Â  const R = RESULTS[s.global] || RESULTS.organisateur; // fallback

Â  Â  Â  root.innerHTML = "";

Â  Â  Â  const card = el("div",{class:"lpf-card lpf-result"});
Â  Â  Â  const titleEl = el("h2",{}, R.title);
Â  Â  Â  card.appendChild(titleEl);
Â  Â  Â  card.appendChild(el("div",{class:"body", html: naiveSanitize(R.body)}));

Â  Â  Â  // MODIFICATION 2 : Bouton remplacÃ© par un simple bouton qui fait dÃ©filer vers le formulaire d'e-mail.
Â  Â  Â  const actions = el("div",{class:"lpf-actions"},[
Â  Â  Â  Â  el("button",{class:"lpf-btn",type:"button", onclick:"document.getElementById('email-block').scrollIntoView({behavior: 'smooth'})"},"Poursuivre pour recevoir le guide")
Â  Â  Â  ]);
Â  Â  Â  card.appendChild(actions);

Â  Â  Â  root.appendChild(card);

Â  Â  Â  // Focus + analytics
Â  Â  Â  titleEl.focus();
Â  Â  Â  try { window.dispatchEvent(new CustomEvent('lpf-quiz-finished', {detail:{profile:s.global, domA:s.domA, domB:s.domB, domC:s.domC}})); } catch(e){}
Â  Â  }

Â  Â  /* Init */
Â  Â  renderStart();
Â  })();
Â  </script>

Â  Â  Â  Â  <div id="email-block">
Â  Â  <h2 style="margin-bottom:8px;">Recevez votre guide personnalisÃ© ğŸ“˜</h2>
Â  Â  Â  Â  <p style="margin-top:0;">Entrez votre e-mail pour recevoir votre profil et le guide. L'envoi se fait dans votre boÃ®te de rÃ©ception **(VÃ©rifiez bien l'adresse !)**</p>
Â  Â  <input id="email" type="email" placeholder="Votre e-mail">
Â  Â  <br>
Â  Â  <button id="sendEmail" class="lpf-btn" style="margin-top:14px;">Envoyer mon profil</button>
Â  Â  <div id="feedback" class="feedback"></div>
Â  </div>

Â  <script>
Â  Â  const emailInput = document.getElementById("email");
Â  Â  const sendBtn = document.getElementById("sendEmail");
Â  Â  const feedbackEl = document.getElementById("feedback");

Â  Â  // Le quiz Ã©met cet Ã©vÃ©nement Ã  la fin (dÃ©jÃ  gÃ©rÃ© dans ton code)
Â  Â  window._lpfProfile = "";
Â  Â  window.addEventListener("lpf-quiz-finished", (ev) => {
Â  Â  Â  window._lpfProfile = ev.detail?.profile || "";
Â  Â  });

Â  Â  async function sendEmail() {
Â  Â  Â  const email = (emailInput.value || "").trim();
Â  Â  Â  const profile = window._lpfProfile || "";
Â  Â  Â  if (!email) {
Â  Â  Â  Â  feedbackEl.textContent = "Veuillez saisir votre adresse e-mail.";
Â  Â  Â  Â  feedbackEl.style.color = "red";
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  sendBtn.disabled = true;
Â  Â  Â  feedbackEl.textContent = "â³ Envoi en coursâ€¦";
Â  Â  Â  feedbackEl.style.color = "#555";

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch("/submit-email", {
Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  body: JSON.stringify({ email, profile })
Â  Â  Â  Â  });
Â  Â  Â  Â  const j = await res.json();
Â  Â  Â  Â  if (j.ok) {
Â  Â  Â  Â  Â  feedbackEl.textContent = "âœ… Merci ! Votre profil a bien Ã©tÃ© envoyÃ©. Vous recevrez votre guide sous peu.";
Â  Â  Â  Â  Â  feedbackEl.style.color = "green";
Â  Â  Â  Â  Â  emailInput.value = "";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  feedbackEl.textContent = "âŒ Erreur : " + (j.error || "impossible dâ€™envoyer vos donnÃ©es");
Â  Â  Â  Â  Â  feedbackEl.style.color = "red";
Â  Â  Â  Â  }
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  feedbackEl.textContent = "âŒ Erreur rÃ©seau : rÃ©essayez dans un instant.";
Â  Â  Â  Â  feedbackEl.style.color = "red";
Â  Â  Â  } finally {
Â  Â  Â  Â  sendBtn.disabled = false;
Â  Â  Â  }
Â  Â  }

Â  Â  sendBtn.addEventListener("click", sendEmail);
Â  Â  emailInput.addEventListener("keypress", (e) => { if (e.key === "Enter") sendEmail(); });
Â  </script>
</body>
</html>
